{
	"name": "samplejsonflow",
	"properties": {
		"type": "MappingDataFlow",
		"typeProperties": {
			"sources": [
				{
					"dataset": {
						"referenceName": "samplejson",
						"type": "DatasetReference"
					},
					"name": "samplejson"
				}
			],
			"sinks": [
				{
					"dataset": {
						"referenceName": "samplejsonoutput",
						"type": "DatasetReference"
					},
					"name": "sink1"
				}
			],
			"transformations": [
				{
					"name": "Select1"
				},
				{
					"name": "DerivedColumn1"
				},
				{
					"name": "Select2"
				},
				{
					"name": "Flatten1"
				}
			],
			"scriptLines": [
				"source(output(",
				"          feeds as (id as integer, title as string, description as string, location as string, lng as integer, lat as integer, userId as integer, name as string, isdeleted as boolean, profilePicture as string, videoUrl as string, images as string, mediatype as integer, imagePaths as string, feedsComment as string, commentCount as integer, multiMedia as (id as integer, name as string, description as string, url as string, mediatype as integer, likeCount as integer, place as string, createAt as string)[], likeDislike as (likes as integer, dislikes as integer, userAction as integer), createdAt as string, code as integer, msg as string)[],",
				"          totalFeed as integer",
				"     ),",
				"     allowSchemaDrift: true,",
				"     validateSchema: false,",
				"     ignoreNoFilesFound: false,",
				"     documentForm: 'singleDocument') ~> samplejson",
				"samplejson select(mapColumn(",
				"          code,",
				"          commentCount,",
				"          createdAt,",
				"          description,",
				"          feedsComment,",
				"          id,",
				"          imagePaths,",
				"          images,",
				"          isdeleted,",
				"          lat,",
				"          likeDislike,",
				"          lng,",
				"          location,",
				"          mediatype,",
				"          msg,",
				"          multiMedia,",
				"          name,",
				"          profilePicture,",
				"          title,",
				"          userId,",
				"          videoUrl",
				"     ),",
				"     skipDuplicateMapInputs: true,",
				"     skipDuplicateMapOutputs: true) ~> Select1",
				"Select1 derive(Feed = @(id=id,",
				"          MultipleItem=multiMedia)) ~> DerivedColumn1",
				"DerivedColumn1 select(mapColumn(",
				"          Feed",
				"     ),",
				"     skipDuplicateMapInputs: true,",
				"     skipDuplicateMapOutputs: true) ~> Select2",
				"Select2 foldDown(unroll(Feed.MultipleItem),",
				"     mapColumn(",
				"          Feed = Feed.id,",
				"          MultipleItem = Feed.MultipleItem.id",
				"     ),",
				"     skipDuplicateMapInputs: false,",
				"     skipDuplicateMapOutputs: false) ~> Flatten1",
				"Flatten1 sink(allowSchemaDrift: true,",
				"     validateSchema: false,",
				"     skipDuplicateMapInputs: true,",
				"     skipDuplicateMapOutputs: true) ~> sink1"
			]
		}
	}
}